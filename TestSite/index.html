<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Glory Years Radio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Glory Years Radio - a retro-style pseudo-live YouTube radio experience." />
  <link rel="icon" href="https://www.gyradio.com/game/icon.png" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg-color: #050816;
      --panel-color: #111827;
      --accent-color: #ff4b9f;
      --accent-soft: #ff9fd0;
      --text-color: #e5e7eb;
      --muted-text: #9ca3af;
      --button-bg: #1f2937;
      --button-hover: #374151;
      --danger-color: #f97373;
      --success-color: #4ade80;
      --border-glow: 0 0 12px rgba(255, 75, 159, 0.7);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at top, #111827 0%, #020617 55%, #000 100%);
      color: var(--text-color);
      font-family: 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      overflow: hidden;
    }

    body {
      position: relative;
    }

    /* üåå Starfield canvas */
    #background {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      z-index: 0;
      background: transparent;
    }

    /* üìª Main container */
    .container {
      position: relative;
      z-index: 2;
      max-width: 960px;
      margin: 0 auto;
      padding: 16px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(17,24,39,0.95));
      border-radius: 10px;
      border: 1px solid rgba(148,163,184,0.4);
      box-shadow: 0 10px 30px rgba(15,23,42,0.9);
      backdrop-filter: blur(10px);
    }

    .logo-area {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-circle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #f97316, #e11d48 45%, #4f46e5 100%);
      box-shadow: 0 0 18px rgba(248,113,113,0.9);
    }

    .logo-text h1 {
      font-family: 'Press Start 2P', system-ui, sans-serif;
      font-size: 1.4vh;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: #f9fafb;
      text-shadow: 0 0 6px rgba(248,250,252,0.8);
      margin-bottom: 4px;
    }

    .tagline {
      font-size: 0.9vh;
      color: var(--muted-text);
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }

    .status-area {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-label {
      font-family: 'Press Start 2P', system-ui, sans-serif;
      font-size: 0.8vh;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(248,250,252,0.3);
      color: #f97373;
      background: radial-gradient(circle at top, rgba(30,64,175,0.8), rgba(15,23,42,0.95));
      box-shadow: 0 0 10px rgba(248,113,113,0.5);
    }

    .status-label.active {
      color: #bbf7d0;
      border-color: rgba(74,222,128,0.8);
      box-shadow: 0 0 14px rgba(74,222,128,0.9);
      background: radial-gradient(circle at top, rgba(22,163,74,0.9), rgba(15,23,42,0.95));
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 0;
    }

    .player-section {
      flex: 1;
      min-height: 0;
    }

    .player-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
      min-height: 220px;
      background: radial-gradient(circle at top, #020617, #020617 40%, #000 100%);
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 18px 40px rgba(15,23,42,0.95);
      overflow: hidden;
    }

    #player {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }

    .controls-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 10px;
      background: linear-gradient(145deg, rgba(15,23,42,0.96), rgba(17,24,39,0.98));
      border-radius: 12px;
      border: 1px solid rgba(148,163,184,0.5);
      box-shadow: 0 14px 30px rgba(15,23,42,0.95);
    }

    .button-row,
    .playlist-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    button {
      font-family: 'Roboto', system-ui, sans-serif;
      font-size: 0.9rem;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      padding: 8px 14px;
      background: radial-gradient(circle at top, #111827, #020617);
      color: var(--text-color);
      cursor: pointer;
      transition: all 0.15s ease-out;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
    }

    button:hover:not(:disabled) {
      background: radial-gradient(circle at top, #1f2937, #020617);
      box-shadow: 0 0 12px rgba(148,163,184,0.7);
      transform: translateY(-1px);
    }

    button:disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }

    .primary-btn {
      flex: 1;
      background: radial-gradient(circle at top, #f97316, #e11d48 55%, #4f46e5 100%);
      border-color: rgba(248,250,252,0.8);
      color: #0b1120;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      box-shadow: 0 0 18px rgba(248,113,113,0.9);
    }

    .primary-btn:hover:not(:disabled) {
      box-shadow: 0 0 22px rgba(248,113,113,1);
      transform: translateY(-1px) scale(1.01);
    }

    .secondary-btn {
      flex: 1;
      min-width: 0;
    }

    .playlist-btn {
      flex: 1;
      min-width: 0;
      font-size: 0.85rem;
    }

    .playlist-btn.active {
      border-color: var(--accent-color);
      box-shadow: var(--border-glow);
      color: var(--accent-soft);
    }

    footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 4px;
      font-size: 0.75rem;
      color: var(--muted-text);
    }

    .link-btn {
      background: transparent;
      border: none;
      padding: 0;
      color: var(--accent-soft);
      text-decoration: underline;
      text-underline-offset: 3px;
      border-radius: 0;
      box-shadow: none;
    }

    .link-btn:hover {
      color: var(--accent-color);
      box-shadow: none;
      transform: none;
      background: transparent;
    }

    .footer-text {
      opacity: 0.8;
    }

    /* üìú Privacy Modal (structure unchanged) */
    .modal {
      display: none;
      position: fixed;
      z-index: 50;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.7);
    }

    .modal-content {
      background-color: #111827;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #4b5563;
      width: 90%;
      max-width: 600px;
      border-radius: 10px;
      color: #e5e7eb;
      box-shadow: 0 10px 30px rgba(0,0,0,0.8);
    }

    .modal-content h2 {
      margin-bottom: 10px;
      font-family: 'Press Start 2P', system-ui, sans-serif;
      font-size: 0.9rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .modal-content p {
      margin-bottom: 10px;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .close {
      color: #9ca3af;
      float: right;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover {
      color: #e5e7eb;
    }

    /* üîä Full-screen splash screen (retro, above starfield, below UI) */
    #splashScreen {
      position: fixed;
      inset: 0;
      z-index: 3;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, rgba(15,23,42,0.9), rgba(2,6,23,0.96));
      backdrop-filter: blur(4px);
      opacity: 1;
      transition: opacity 0.5s ease-out;
    }

    #splashScreen.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    #splashInner {
      padding: 24px 32px;
      border-radius: 16px;
      border: 1px solid rgba(248,250,252,0.4);
      background: radial-gradient(circle at top, rgba(15,23,42,0.98), rgba(2,6,23,0.98));
      box-shadow:
        0 0 24px rgba(248,113,113,0.6),
        0 0 40px rgba(59,130,246,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #startRadioBtn {
      font-family: 'Press Start 2P', system-ui, sans-serif;
      font-size: 0.9rem;
      padding: 14px 26px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      border-radius: 999px;
      border: 1px solid rgba(248,250,252,0.9);
      background: radial-gradient(circle at top, #f97316, #e11d48 55%, #4f46e5 100%);
      color: #020617;
      box-shadow:
        0 0 18px rgba(248,113,113,1),
        0 0 26px rgba(59,130,246,0.9);
      cursor: pointer;
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
    }

    #startRadioBtn:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow:
        0 0 24px rgba(248,113,113,1),
        0 0 32px rgba(59,130,246,1);
    }

    #startRadioBtn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow:
        0 0 14px rgba(248,113,113,0.9),
        0 0 22px rgba(59,130,246,0.8);
    }

    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      header {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
      }

      .logo-text h1 {
        font-size: 1.6vh;
      }

      .tagline {
        font-size: 1.0vh;
      }

      .controls-section {
        padding: 8px;
      }

      .modal-content {
        margin-top: 20%;
      }

      #startRadioBtn {
        font-size: 0.8rem;
        padding: 12px 20px;
      }
    }
  </style>
</head>
<body>
<canvas id="background"></canvas>

  <!-- üåå Starfield canvas already included in Chunk 1 -->

  <!-- üîä FULL-SCREEN SPLASH SCREEN -->
  <div id="splashScreen">
    <div id="splashInner">
      <button id="startRadioBtn">Tune In</button>
    </div>
  </div>

  <!-- üìª Main UI container -->
  <div class="container">
    <header>
      <div class="logo-area">
        <div class="logo-circle"></div>
        <div class="logo-text">
          <h1>Glory Years Radio</h1>
          <p class="tagline">Retro Nights ¬∑ Pseudo-Live YouTube Radio</p>
        </div>
      </div>
      <div class="status-area">
        <span id="liveLabel" class="status-label">OFF AIR</span>
      </div>
    </header>

    <main>
      <section class="player-section">
        <div class="player-wrapper">
          <iframe
            id="player"
            src=""
            title="Glory Years Radio Player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </section>

      <section class="controls-section">
        <div class="button-row">
          <button id="tuneAgainBtn" class="primary-btn">Live Radio Show / Retune</button>
          <button id="sleepTimerBtn" class="secondary-btn">‚è≤Ô∏è Sleep Timer</button>
        </div>

        <div class="button-row">
          <button id="carModeBtn" class="secondary-btn">üöó Car Mode</button>
          <button id="retroGameBtn" class="secondary-btn">üïπÔ∏è Retro Game</button>
        </div>

        <div class="button-row">
          <button id="comedyBtn" class="secondary-btn playlist-btn"
            data-url="https://www.youtube.com/embed/videoseries?list=PLmeHHqm4zpr_MPPQaamd4f69Bm9GVtYwd&autoplay=1&loop=1">
            üé≠ Comedy
          </button>
          <button id="merchBtn" class="secondary-btn">üõçÔ∏è GY Merchandise</button>
        </div>

        <div class="playlist-row">
          <button class="playlist-btn"
            data-url="https://www.youtube.com/embed?listType=playlist&list=PLmeHHqm4zpr_-QAUdPbPdU2G-OiGYcGAc&autoplay=1&loop=1">
            üì∫ Intro Playlist
          </button>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-left">
        <button id="privacyBtn" class="link-btn">Privacy Policy</button>
      </div>
      <div class="footer-right">
        <span class="footer-text">¬© <span id="yearSpan"></span> Glory Years Radio</span>
      </div>
    </footer>
  </div>

  <!-- üìú Privacy Policy Modal -->
  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <span id="closePrivacy" class="close">&times;</span>
      <h2>Privacy Policy</h2>
      <p>
        This site uses YouTube embeds and may rely on cookies or local storage for basic functionality such as remembering preferences.
        No personal data is collected or stored by Glory Years Radio beyond what is handled by YouTube or your browser.
      </p>
      <p>
        By using this site, you agree to YouTube's Terms of Service and Privacy Policy. If you do not agree, please close this site.
      </p>
    </div>
  </div>

 

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const player = document.getElementById("player");
      const tuneAgainBtn = document.getElementById("tuneAgainBtn");
      const sleepTimerBtn = document.getElementById("sleepTimerBtn");
      const carModeBtn = document.getElementById("carModeBtn");
      const retroGameBtn = document.getElementById("retroGameBtn");
      const merchBtn = document.getElementById("merchBtn");
      const privacyBtn = document.getElementById("privacyBtn");
      const privacyModal = document.getElementById("privacyModal");
      const closePrivacy = document.getElementById("closePrivacy");
      const liveLabel = document.getElementById("liveLabel");
      const yearSpan = document.getElementById("yearSpan");
      const splashScreen = document.getElementById("splashScreen");
      const startRadioBtn = document.getElementById("startRadioBtn");

      yearSpan.textContent = new Date().getFullYear();

      /* Disable all buttons until splash is dismissed */
      const allButtons = Array.from(document.querySelectorAll("button"))
        .filter(btn => btn !== startRadioBtn);
      allButtons.forEach(btn => btn.disabled = true);

      /* ---------------- STARFIELD BACKGROUND ---------------- */
      const canvas = document.getElementById("background");
      const ctx = canvas.getContext("2d");
      let stars = [];
      let animationFrameId;

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }

      function createStars() {
        stars = [];
        for (let i = 0; i < 200; i++) {
          stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 2,
            speed: Math.random() * 0.6 + 0.2
          });
        }
      }

      function drawStars() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        stars.forEach(star => {
          ctx.beginPath();
          ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
          ctx.fill();
          star.y += star.speed;
          if (star.y > canvas.height) {
            star.y = 0;
            star.x = Math.random() * canvas.width;
          }
        });
        animationFrameId = requestAnimationFrame(drawStars);
      }

      function stopStars() {
        cancelAnimationFrame(animationFrameId);
      }

      window.addEventListener("resize", () => {
        resizeCanvas();
        createStars();
      });

      resizeCanvas();
      createStars();
      drawStars();

      /* ---------------- DAILY OFFSET FUNCTION ---------------- */
      function getDailyOffset(max) {
        const now = new Date();
        const seed = now.getFullYear() + now.getMonth() + now.getDate();
        return seed % max;
      }

      /* ---------------- LOAD LIVE RADIO BLOCK ---------------- */
      async function startLiveRadio() {
        try {
          const response = await fetch("https://www.gyradio.com/data/gy_radio_bumpers.json");
          const bumpers = await response.json();

          const now = new Date();
          const hour = now.getHours();
          const secondsIntoHour = now.getMinutes() * 60 + now.getSeconds();

          const dailyOffset = getDailyOffset(bumpers.length);
          const blockIndex = (hour + dailyOffset) % bumpers.length;

          const block = bumpers[blockIndex];
          const startTime = block.start + secondsIntoHour;

          const embedUrl =
            `https://www.youtube.com/embed/${block.videoId}` +
            `?autoplay=1&start=${startTime}&loop=1&playlist=${block.videoId}`;

          player.src = embedUrl;

          liveLabel.textContent = "ON AIR";
          liveLabel.classList.add("active");

        } catch (err) {
          console.error("Error loading bumpers:", err);
        }
      }

      /* ---------------- SPLASH SCREEN LOGIC ---------------- */
      startRadioBtn.addEventListener("click", () => {
        startLiveRadio();

        splashScreen.classList.add("fade-out");

        setTimeout(() => {
          splashScreen.remove();
          allButtons.forEach(btn => btn.disabled = false);
        }, 500);
      });

      /* ---------------- RETUNE BUTTON ---------------- */
      tuneAgainBtn.addEventListener("click", startLiveRadio);

      /* ---------------- PLAYLIST BUTTONS ---------------- */
      const playlistButtons = document.querySelectorAll(".playlist-btn");

      playlistButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          playlistButtons.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");

          const url = btn.getAttribute("data-url");
          player.src = url;

          liveLabel.textContent = "OFF AIR";
          liveLabel.classList.remove("active");
        });
      });

      /* ---------------- SLEEP TIMER ---------------- */
      let sleepTimerActive = false;
      let sleepTimeout;

      sleepTimerBtn.addEventListener("click", () => {
        if (sleepTimerActive) return;

        sleepTimerActive = true;
        sleepTimerBtn.disabled = true;
        sleepTimerBtn.textContent = "‚è≤Ô∏è Sleep Timer (30m)";

        sleepTimeout = setTimeout(() => {
          player.src = "";
          liveLabel.textContent = "OFF AIR";
          liveLabel.classList.remove("active");
          sleepTimerBtn.disabled = false;
          sleepTimerBtn.textContent = "‚è≤Ô∏è Sleep Timer";
          sleepTimerActive = false;
          stopStars();
        }, 30 * 60 * 1000);
      });

      /* ---------------- CAR MODE ---------------- */
      carModeBtn.addEventListener("click", () => {
        window.location.href = "/car/";
      });

      /* ---------------- RETRO GAME ---------------- */
      retroGameBtn.addEventListener("click", () => {
        window.location.href = "/game/";
      });

      /* ---------------- MERCH ---------------- */
      merchBtn.addEventListener("click", () => {
        alert("Merch store coming soon!");
      });

      /* ---------------- PRIVACY MODAL ---------------- */
      privacyBtn.addEventListener("click", () => {
        privacyModal.style.display = "block";
      });

      closePrivacy.addEventListener("click", () => {
        privacyModal.style.display = "none";
      });

      window.addEventListener("click", (e) => {
        if (e.target === privacyModal) {
          privacyModal.style.display = "none";
        }
      });
    });
  </script>

</body>
</html>

