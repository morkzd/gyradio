<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mood Fixr</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #000;
        font-family: system-ui, sans-serif;
        color: #fff;
        overflow: hidden;
    }

    #app {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px;
        box-sizing: border-box;
    }

    .screen {
        width: 100%;
        max-width: 480px;
    }

    .hidden {
        display: none;
    }

    h1 {
        text-align: center;
        font-size: 8vw;
        margin: 0 0 12px 0;
        color: #ffffff;
        text-shadow: 0 0 8px #444;
    }

    .tagline {
        text-align: center;
        font-size: 4vw;
        opacity: 0.8;
        margin-bottom: 20px;
    }

    .moodGrid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-bottom: 16px;
    }

    .moodBtn {
        border: none;
        border-radius: 12px;
        padding: 14px 10px;
        font-size: 4.5vw;
        cursor: pointer;
        color: #000;
        background: #ddd;
        transition: transform 0.1s ease, background 0.2s ease;
    }

    .moodBtn:active {
        transform: scale(0.96);
    }

    .sponsor {
        text-align: center;
        font-size: 3.2vw;
        opacity: 0.6;
        margin-top: 12px;
    }

    /* MOOD VIEW */

    #moodView {
        position: relative;
        width: 100%;
        height: 85vh;
        border-radius: 20px;
        overflow: hidden;
        background: #222;
        transition: background 2s linear;
    }

    #quoteBox {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 85%;
        padding: 14px 18px;
        background: rgba(0,0,0,0.35);
        border-radius: 12px;
        text-align: center;
        font-size: 4.8vw;
        line-height: 1.4;
        opacity: 0;
        transition: opacity 1.2s ease;
    }

    #quoteBox.visible {
        opacity: 1;
    }

    #footerNote {
        position: absolute;
        bottom: 10px;
        width: 100%;
        text-align: center;
        font-size: 3vw;
        opacity: 0.6;
    }

    #backBtn {
        position: absolute;
        top: 10px;
        left: 10px;
        border: none;
        padding: 6px 10px;
        border-radius: 8px;
        background: rgba(0,0,0,0.4);
        color: #fff;
        font-size: 3.5vw;
        cursor: pointer;
    }

    #nextQuoteBtn {
        position: absolute;
        top: 10px;
        right: 10px;
        border: none;
        padding: 6px 10px;
        border-radius: 8px;
        background: rgba(0,0,0,0.4);
        color: #fff;
        font-size: 3.5vw;
        cursor: pointer;
    }

</style>
</head>
<body>

<div id="app">

    <!-- LANDING SCREEN -->
    <div id="landingScreen" class="screen">
        <h1>Mood Fixr</h1>
        <div class="tagline">Pick how you feel. We'll soften or lift it.</div>

        <div class="moodGrid">
            <button class="moodBtn" onclick="selectMood('angry')">Angry</button>
            <button class="moodBtn" onclick="selectMood('sad')">Sad</button>
            <button class="moodBtn" onclick="selectMood('anxious')">Anxious</button>
            <button class="moodBtn" onclick="selectMood('excited')">Excited</button>
            <button class="moodBtn" onclick="selectMood('flat')" style="grid-column: span 2;">Flat / Meh</button>
        </div>

        <div class="sponsor">
            This app stays free thanks to your support.<br>
            <span style="opacity:0.8;">Only use in brief periods.</span>
        </div>
    </div>

    <!-- MOOD SCREEN -->
    <div id="moodScreen" class="screen hidden">
        <div id="moodView"></div>

        <div id="quoteBox">
            <div id="quoteText"></div>
        </div>

        <button id="backBtn" onclick="goBack()">Back</button>
        <button id="nextQuoteBtn" onclick="nextQuote()">Next</button>

        <div id="footerNote">Only use in brief periods.</div>
    </div>

</div>

<script>
/* CALM COLOUR PALETTES */

const moods = {
    angry: {
        colours: ["#f2c6c6", "#e8a8a8", "#d98f8f"],
        quotes: [
            "Let the heat soften.",
            "You’re allowed to pause.",
            "This feeling will pass.",
            "Breathe out the tension."
        ]
    },
    sad: {
        colours: ["#fff4d6", "#f7eac2", "#f0dfad"],
        quotes: [
            "It’s okay to feel this.",
            "Be gentle with yourself.",
            "This moment is temporary.",
            "You’re not alone in this."
        ]
    },
    anxious: {
        colours: ["#d6f2e1", "#c2e8d4", "#aedfc7"],
        quotes: [
            "One slow breath at a time.",
            "You are safe right now.",
            "Let your shoulders drop.",
            "You don’t need to solve everything today."
        ]
    },
    excited: {
        colours: ["#f7d1ff", "#fcd8c8", "#f7c4ff"],
        quotes: [
            "Enjoy the spark.",
            "Let the joy flow gently.",
            "You can ride this wave.",
            "Let excitement warm you, not overwhelm you."
        ]
    },
    flat: {
        colours: ["#dcd7e8", "#cfcbdc", "#c3bfd1"],
        quotes: [
            "Existing is enough today.",
            "Small steps count.",
            "You’re doing better than you think.",
            "Soft moments matter too."
        ]
    }
};

let currentMood = null;
let currentIndex = 0;
let hueShift = 0;

/* SELECT MOOD */

function selectMood(key) {
    currentMood = moods[key];
    currentIndex = 0;
    hueShift = 0;

    document.getElementById("landingScreen").classList.add("hidden");
    document.getElementById("moodScreen").classList.remove("hidden");

    updateBackground();
    showQuote();
}

/* UPDATE BACKGROUND */

function updateBackground() {
    const view = document.getElementById("moodView");
    const base = currentMood.colours[currentIndex % currentMood.colours.length];

    view.style.background = adjustHue(base, hueShift);
}

/* HUE SHIFTING */

function adjustHue(hex, shift) {
    let c = hexToHSL(hex);
    c.h = (c.h + shift + 360) % 360;
    return `hsl(${c.h}, ${c.s}%, ${c.l}%)`;
}

function hexToHSL(H) {
    let r = 0, g = 0, b = 0;
    if (H.length == 4) {
        r = "0x" + H[1] + H[1];
        g = "0x" + H[2] + H[2];
        b = "0x" + H[3] + H[3];
    } else {
        r = "0x" + H[1] + H[2];
        g = "0x" + H[3] + H[4];
        b = "0x" + H[5] + H[6];
    }
    r /= 255; g /= 255; b /= 255;
    let cmin = Math.min(r,g,b),
        cmax = Math.max(r,g,b),
        delta = cmax - cmin,
        h = 0, s = 0, l = 0;

    if (delta == 0) h = 0;
    else if (cmax == r) h = ((g - b) / delta) % 6;
    else if (cmax == g) h = (b - r) / delta + 2;
    else h = (r - g) / delta + 4;

    h = Math.round(h * 60);
    if (h < 0) h += 360;

    l = (cmax + cmin) / 2;
    s = delta == 0 ? 0 : delta / (1 - Math.abs(2*l - 1));
    s = +(s * 100).toFixed(1);
    l = +(l * 100).toFixed(1);

    return {h, s, l};
}

/* TAP TO SHIFT HUE */

document.getElementById("moodView").addEventListener("click", (e) => {
    const x = e.clientX;
    const mid = window.innerWidth / 2;

    if (x < mid) hueShift -= 8;
    else hueShift += 8;

    updateBackground();
});

/* QUOTES */

function showQuote() {
    const box = document.getElementById("quoteBox");
    const text = document.getElementById("quoteText");

    box.classList.remove("visible");

    setTimeout(() => {
        text.textContent = currentMood.quotes[currentIndex % currentMood.quotes.length];
        box.classList.add("visible");
    }, 200);
}

function nextQuote() {
    currentIndex++;
    updateBackground();
    showQuote();
}

/* BACK */

function goBack() {
    document.getElementById("moodScreen").classList.add("hidden");
    document.getElementById("landingScreen").classList.remove("hidden");
}

</script>

</body>
</html>
